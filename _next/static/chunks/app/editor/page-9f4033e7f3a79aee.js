(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[766],{5273:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(2895).A)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},5968:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(5155),r=s(2115),l=s(3717),n=s(3311),i=s(1788),o=s(285),c=s(4165),d=s(9298),u=s(9719),h=s(9434);function m(){let[e,t]=(0,r.useState)(""),[s,m]=(0,r.useState)("edit"),[x,g]=(0,r.useState)([]),[p,f]=(0,r.useState)(!1),[b,y]=(0,r.useState)(""),[w,v]=(0,r.useState)(null),[j,N]=(0,r.useState)(!1),[k,C]=(0,r.useState)({top:0,left:0}),[S,D]=(0,r.useState)(0),[A,E]=(0,r.useState)(""),[L,z]=(0,r.useState)(""),[M,R]=(0,r.useState)(new Map),[T,B]=(0,r.useState)([]),O=r.useCallback(e=>{if(e.length<3)return[];let t=[];for(let s=0;s<=e.length-3;s++)t.push(e.substring(s,s+3));return t},[]),_=r.useCallback((e,t)=>{let s=e.key.toLowerCase(),a=0;return s===t?a+=1e3:s.startsWith(t)?a+=500:s.includes(t)&&(a+=100),a+=Math.max(0,50-s.length),s.length<=10&&(a+=20),a},[]);r.useCallback((e,t,s)=>{if(e.length<3)return[];let a=e.toLowerCase(),r=O(a);if(0===r.length)return s.slice(0,10);let l=null;for(let e of r){let s=t.get(e);if(!s||0===s.size){l=new Set;break}if(null===l)l=new Set(s);else{let e=new Set;for(let t of l)s.has(t)&&e.add(t);l=e}if(0===l.size)break}return l&&0!==l.size?Array.from(l).map(e=>({sub:s[e],score:_(s[e],a)})).sort((e,t)=>t.score-e.score).slice(0,10).map(e=>e.sub):s.filter(e=>e.key.toLowerCase().startsWith(a)).slice(0,10)},[O,_]);let W=r.useRef(null),U=r.useRef(null),H=r.useRef();(0,r.useEffect)(()=>{let e=u.a.getSubstitutions().sort((e,t)=>e.key.length!==t.key.length?e.key.length-t.key.length:e.key.localeCompare(t.key));B(e),g(e);let t=new Map;e.forEach((e,s)=>{let a=e.key.toLowerCase(),r=e.text.toLowerCase();O(a).forEach(e=>{t.has(e)||t.set(e,new Set),t.get(e).add(s)}),r.split(/\s+/).slice(0,5).forEach(e=>{e.length>=3&&O(e).forEach(e=>{t.has(e)||t.set(e,new Set),t.get(e).add(s)})})}),R(t)},[]),(0,r.useEffect)(()=>{if(w){let e=setTimeout(()=>v(null),3e3);return()=>clearTimeout(e)}},[w]);let $=x.filter(e=>e.key.toLowerCase().includes(b.toLowerCase())||e.text.toLowerCase().includes(b.toLowerCase()));(0,r.useEffect)(()=>(H.current&&clearTimeout(H.current),H.current=setTimeout(()=>{z(b)},150),()=>{H.current&&clearTimeout(H.current)}),[b]),(0,r.useEffect)(()=>{p||(y(""),z(""))},[p]);let q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";v({message:e,type:t})},I=x.filter(e=>e.key.toLowerCase().includes(A.toLowerCase())),V=(e,t)=>{let s=document.createElement("div"),a=s.style,r=window.getComputedStyle(e);a.whiteSpace="pre-wrap",a.wordBreak="break-word",a.position="absolute",a.visibility="hidden",a.top="0",a.left="0",["fontFamily","fontSize","fontWeight","lineHeight","letterSpacing","wordSpacing","paddingTop","paddingLeft","paddingRight","paddingBottom","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","borderStyle","boxSizing"].forEach(e=>{a[e]=r[e]}),s.textContent=e.value.substring(0,t);let l=document.createElement("span");l.textContent=e.value.substring(t)||".",s.appendChild(l),document.body.appendChild(s);let n=e.getBoundingClientRect(),i=l.getBoundingClientRect(),o=s.getBoundingClientRect(),c=n.top+(i.top-o.top)-e.scrollTop+25,d=n.left+(i.left-o.left)-e.scrollLeft,u=window.innerHeight,h=window.innerWidth,m=Math.min(50*I.length,500);c+m>u&&(c=n.top+(i.top-o.top)-e.scrollTop-m-5),d+512>h&&(d=h-512-10);let x={top:c=Math.max(10,c),left:d=Math.max(10,d)};return document.body.removeChild(s),x},F=r.useCallback(e=>{let s=e.target.value,a=e.target.selectionStart;t(s);let r=s.slice(0,a),l=r.lastIndexOf("@");if(-1===l)return void N(!1);let n=r.slice(l+1);if(n.includes(" ")||n.length<3)return void N(!1);E(n),D(0),W.current&&(C(V(W.current,a)),N(!0))},[]),P=s=>{if(!W.current)return;let a=W.current.selectionStart,r=e.slice(0,a),l=r.lastIndexOf("@");t(r.slice(0,l)+s.text+e.slice(a)),N(!1),setTimeout(()=>{if(W.current){let e=l+s.text.length;W.current.setSelectionRange(e,e),W.current.focus()}},0)},G=Array.from({length:e.split("\n").length},(e,t)=>t+1).join("\n"),J="generate"===s?(0,h.dY)(e):e,K="generate"===s;return(0,a.jsxs)("div",{className:"flex h-screen bg-white text-gray-900 overflow-hidden",children:[(0,a.jsx)(d.A,{currentPage:"/editor"}),w&&(0,a.jsx)("div",{className:"fixed top-4 right-4 z-50 flex items-center gap-2 px-4 py-3 rounded-lg shadow-lg ".concat("success"===w.type?"bg-green-500 text-white":"bg-red-500 text-white"),children:(0,a.jsx)("span",{className:"font-medium",children:w.message})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,a.jsxs)("div",{className:"h-12 bg-gray-100 border-b border-gray-200 flex items-center px-4 mt-16",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:(0,a.jsx)("span",{className:"text-sm font-medium truncate",children:"Editor de Texto"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>f(!0),className:"px-3 py-1.5 text-sm h-8",children:"Ver Substitui\xe7\xf5es"}),(0,a.jsxs)("div",{className:"flex bg-gray-200 rounded-lg p-1",children:[(0,a.jsxs)(o.$,{variant:"edit"===s?"default":"ghost",size:"sm",onClick:()=>m("edit"),className:"px-3 py-1.5 text-sm h-8",children:[(0,a.jsx)(l.A,{className:"w-4 h-4 mr-1.5"}),"Editar"]}),(0,a.jsxs)(o.$,{variant:"generate"===s?"default":"ghost",size:"sm",onClick:()=>m("generate"),className:"px-3 py-1.5 text-sm h-8",children:[(0,a.jsx)(n.A,{className:"w-4 h-4 mr-1.5"}),"Gerar"]})]}),(0,a.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>{let t=new Blob([e],{type:"text/plain"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="documento.txt",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),q("Arquivo baixado!")},children:[(0,a.jsx)(i.A,{className:"w-4 h-4 mr-2"}),"Download"]})]})]}),(0,a.jsx)("main",{className:"flex-grow p-2 overflow-hidden",children:(0,a.jsxs)("div",{className:"relative h-full font-mono text-sm bg-white border border-gray-200 rounded",children:[(0,a.jsx)("pre",{ref:U,className:"absolute top-0 left-0 bottom-0 w-12 pr-2 pt-4 pb-5 text-right text-gray-400 pointer-events-none select-none overflow-hidden bg-gray-50 border-r border-gray-200",children:G}),(0,a.jsx)("textarea",{ref:W,value:J,onChange:K?void 0:F,onKeyDown:K?void 0:e=>{if(j)if("ArrowDown"===e.key){e.preventDefault();let t=Math.min(S+1,I.length-1);D(t);let s=document.querySelector(".autocomplete-dropdown"),a=null==s?void 0:s.children[t];if(a&&s){let e=s.getBoundingClientRect();a.getBoundingClientRect().bottom>e.bottom&&a.scrollIntoView({block:"end",behavior:"smooth"})}}else if("ArrowUp"===e.key){e.preventDefault();let t=Math.max(S-1,0);D(t);let s=document.querySelector(".autocomplete-dropdown"),a=null==s?void 0:s.children[t];if(a&&s){let e=s.getBoundingClientRect();a.getBoundingClientRect().top<e.top&&a.scrollIntoView({block:"start",behavior:"smooth"})}}else"Enter"===e.key?(e.preventDefault(),P(I[S])):("Escape"===e.key||" "===e.key)&&N(!1)},onScroll:e=>{U.current&&(U.current.scrollTop=e.currentTarget.scrollTop),j&&N(!1)},placeholder:"Digite seu texto aqui... Use @ para autocompletar",readOnly:K,className:"absolute top-0 left-12 right-0 bottom-0 p-4 resize-none border-none outline-none bg-white text-gray-900"}),j&&I.length>0&&!K&&(0,a.jsx)("div",{className:"autocomplete-dropdown fixed bg-white border border-gray-300 rounded-lg shadow-lg max-h-64 overflow-y-auto z-50",style:{top:k.top,left:k.left,width:"800px"},children:I.slice(0,50).map((e,t)=>(0,a.jsxs)("div",{onClick:()=>P(e),className:"p-3 cursor-pointer border-b border-gray-100 hover:bg-gray-50 ".concat(t===S?"bg-blue-50":""),children:[(0,a.jsxs)("div",{className:"font-medium text-sm",children:["@",e.key]}),(0,a.jsx)("div",{className:"text-xs text-gray-600 truncate",children:e.text})]},e.key))})]})})]}),(0,a.jsx)(c.lG,{open:p,onOpenChange:f,children:(0,a.jsxs)(c.Cf,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,a.jsx)(c.c7,{children:(0,a.jsx)(c.L3,{children:"Substitui\xe7\xf5es Dispon\xedveis"})}),(0,a.jsxs)("div",{className:"relative mb-4",children:[(0,a.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:"\uD83D\uDD0D"}),(0,a.jsx)("input",{type:"text",placeholder:"Digite pelo menos 3 caracteres para filtrar...",value:b,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),b&&(0,a.jsx)("button",{onClick:()=>y(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:"âœ•"})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:$.length>0?(0,a.jsxs)(a.Fragment,{children:[b.length>0&&b.length<3&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,a.jsx)("p",{className:"text-sm text-yellow-700",children:"Digite pelo menos 3 caracteres para uma busca mais r\xe1pida"})}),(0,a.jsx)("div",{className:"grid gap-3",children:$.map((e,t)=>(0,a.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-800",children:["@",e.key]}),e.key.toLowerCase().startsWith(L.toLowerCase())&&(0,a.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Exact Match"})]}),(0,a.jsx)("div",{className:"text-sm text-gray-700 whitespace-pre-wrap break-words",children:e.text.length>150?"".concat(e.text.substring(0,150),"..."):e.text})]},"".concat(e.key,"-").concat(t)))}),x.length>$.length&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,a.jsxs)("p",{className:"text-sm text-blue-700",children:["Mostrando"," ",$.length," ","de ",x.length," ","substitui\xe7\xf5es.",(0,a.jsx)("br",{}),(0,a.jsx)("strong",{children:"\uD83D\uDCA1 Dica:"})," Use termos mais espec\xedficos para resultados mais precisos e r\xe1pidos."]})})]}):(0,a.jsx)("div",{className:"flex items-center justify-center h-32 text-gray-500",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-2 opacity-50",children:"\uD83D\uDD0D"}),(0,a.jsx)("p",{children:b.length>0&&b.length<3?"Digite pelo menos 3 caracteres":"Nenhuma substitui\xe7\xe3o encontrada"}),(0,a.jsx)("p",{className:"text-sm opacity-75",children:b.length>0&&b.length<3?"Filtros mais longos s\xe3o mais r\xe1pidos":"Tente ajustar o filtro ou verificar a grafia"})]})})})]})})]})}},8318:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(2895).A)("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]])},8341:(e,t,s)=>{Promise.resolve().then(s.bind(s,5968))},9298:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var a=s(5155),r=s(2115);let l=(0,s(2895).A)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);var n=s(7434),i=s(6740),o=s(5273),c=s(8318),d=s(4416),u=s(4783),h=s(285);let m=[{id:"home",title:"P\xe1gina Inicial",icon:l,path:"/"},{id:"editor",title:"Editor",icon:n.A,path:"/editor"},{id:"calcula_dose",title:"Contador de Doses",icon:i.A,path:"/calcula_dose"},{id:"exames_json",title:"Organizar Exames JSON",icon:o.A,path:"/exames_json"},{id:"notas",title:"Notas",icon:c.A,path:"/notas",disabled:!0}];function x(e){let{currentPage:t}=e,[s,l]=(0,r.useState)(!1),n=e=>{window.location.href=e,l(!1)},i=e=>{if(t)return t===e;{let t=window.location.pathname;return t===e||"/"===t&&"/"===e||t.includes(e)&&"/"!==e}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed top-4 left-4 z-50",children:(0,a.jsx)(h.$,{onClick:()=>{l(!s)},variant:"outline",size:"icon",className:"bg-white shadow-md hover:shadow-lg transition-shadow",children:s?(0,a.jsx)(d.A,{className:"w-5 h-5"}):(0,a.jsx)(u.A,{className:"w-5 h-5"})})}),s&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity",onClick:()=>l(!1)}),(0,a.jsxs)("div",{className:"fixed top-0 left-0 h-full w-80 bg-white shadow-xl z-50 transform transition-transform duration-300 ease-in-out ".concat(s?"translate-x-0":"-translate-x-full"),children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200 bg-blue-600 text-white",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"MedTools"}),(0,a.jsx)(h.$,{onClick:()=>l(!1),variant:"ghost",size:"icon",className:"text-white hover:bg-blue-700",children:(0,a.jsx)(d.A,{className:"w-5 h-5"})})]}),(0,a.jsx)("p",{className:"text-blue-100 text-sm mt-1",children:"Sistema de ferramentas m\xe9dicas"})]}),(0,a.jsx)("nav",{className:"p-4",children:(0,a.jsx)("div",{className:"space-y-2",children:m.map(e=>{let t=e.icon,s=i(e.path),r=e.disabled;return(0,a.jsxs)("button",{onClick:()=>!r&&!s&&n(e.path),disabled:r||s,className:"w-full flex items-center gap-3 p-3 rounded-lg text-left transition-colors ".concat(s?"bg-blue-100 text-blue-700 cursor-default":r?"text-gray-400 cursor-not-allowed opacity-60":"text-gray-700 hover:bg-gray-100 cursor-pointer"),children:[(0,a.jsx)(t,{className:"w-5 h-5 flex-shrink-0"}),(0,a.jsx)("span",{className:"font-medium",children:e.title}),s&&(0,a.jsx)("span",{className:"ml-auto text-xs bg-blue-200 text-blue-700 px-2 py-1 rounded-full",children:"Atual"}),r&&(0,a.jsx)("span",{className:"ml-auto text-xs bg-gray-200 text-gray-500 px-2 py-1 rounded-full",children:"Em Breve"})]},e.id)})})}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200 bg-gray-50",children:(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Desenvolvido para profissionais da sa\xfade"})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[975,114,599,441,684,358],()=>t(8341)),_N_E=e.O()}]);