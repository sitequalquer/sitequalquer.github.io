(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[766],{5273:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},5968:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(5155),a=s(2115),l=s(3717),n=s(3311),i=s(1788),o=s(285),d=s(4165),c=s(9298),u=s(9719),h=s(9434);function m(){let[e,t]=(0,a.useState)(""),[s,m]=(0,a.useState)("edit"),[x,g]=(0,a.useState)([]),[p,f]=(0,a.useState)(!1),[b,y]=(0,a.useState)(""),[w,v]=(0,a.useState)(null),[j,N]=(0,a.useState)(!1),[k,C]=(0,a.useState)({top:0,left:0,direction:"down",maxHeight:320}),[S,D]=(0,a.useState)(0),[E,A]=(0,a.useState)(""),[L,z]=(0,a.useState)(""),[M,R]=(0,a.useState)(new Map),[T,B]=(0,a.useState)([]),H=a.useCallback(e=>{if(e.length<3)return[];let t=[];for(let s=0;s<=e.length-3;s++)t.push(e.substring(s,s+3));return t},[]),O=a.useCallback((e,t)=>{let s=e.key.toLowerCase(),r=0;return s===t?r+=1e3:s.startsWith(t)?r+=500:s.includes(t)&&(r+=100),r+=Math.max(0,50-s.length),s.length<=10&&(r+=20),r},[]);a.useCallback((e,t,s)=>{if(e.length<3)return[];let r=e.toLowerCase(),a=H(r);if(0===a.length)return s.slice(0,10);let l=null;for(let e of a){let s=t.get(e);if(!s||0===s.size){l=new Set;break}if(null===l)l=new Set(s);else{let e=new Set;for(let t of l)s.has(t)&&e.add(t);l=e}if(0===l.size)break}return l&&0!==l.size?Array.from(l).map(e=>({sub:s[e],score:O(s[e],r)})).sort((e,t)=>t.score-e.score).slice(0,10).map(e=>e.sub):s.filter(e=>e.key.toLowerCase().startsWith(r)).slice(0,10)},[H,O]);let _=a.useRef(null),W=a.useRef(null),U=a.useRef();(0,a.useEffect)(()=>{let e=u.a.getSubstitutions().sort((e,t)=>e.key.length!==t.key.length?e.key.length-t.key.length:e.key.localeCompare(t.key));B(e),g(e);let t=new Map;e.forEach((e,s)=>{let r=e.key.toLowerCase(),a=e.text.toLowerCase();H(r).forEach(e=>{t.has(e)||t.set(e,new Set),t.get(e).add(s)}),a.split(/\s+/).slice(0,5).forEach(e=>{e.length>=3&&H(e).forEach(e=>{t.has(e)||t.set(e,new Set),t.get(e).add(s)})})}),R(t)},[]),(0,a.useEffect)(()=>{if(w){let e=setTimeout(()=>v(null),3e3);return()=>clearTimeout(e)}},[w]);let $=x.filter(e=>e.key.toLowerCase().includes(b.toLowerCase())||e.text.toLowerCase().includes(b.toLowerCase()));(0,a.useEffect)(()=>(U.current&&clearTimeout(U.current),U.current=setTimeout(()=>{z(b)},150),()=>{U.current&&clearTimeout(U.current)}),[b]),(0,a.useEffect)(()=>{p||(y(""),z(""))},[p]);let q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";v({message:e,type:t})},I=x.filter(e=>e.key.toLowerCase().includes(E.toLowerCase())),V=(e,t)=>{let s,r,a=document.createElement("div"),l=a.style,n=window.getComputedStyle(e);l.whiteSpace="pre-wrap",l.wordBreak="break-word",l.position="absolute",l.visibility="hidden",l.top="0",l.left="0",["fontFamily","fontSize","fontWeight","lineHeight","letterSpacing","wordSpacing","paddingTop","paddingLeft","paddingRight","paddingBottom","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","borderStyle","boxSizing"].forEach(e=>{l[e]=n[e]}),a.textContent=e.value.substring(0,t);let i=document.createElement("span");i.textContent=e.value.substring(t)||".",a.appendChild(i),document.body.appendChild(a);let o=e.getBoundingClientRect(),d=i.getBoundingClientRect(),c=a.getBoundingClientRect(),u=d.top-c.top,h=d.left-c.left,m=o.top+u-e.scrollTop,x=o.left+h-e.scrollLeft,g=Math.min(56*I.length,320),p=window.innerHeight,f=window.innerWidth,b=o.bottom,y=o.top;if(b<0||y>p)return document.body.removeChild(a),null;m<p/2?(r="down",(s=m+25)+g>p&&p-s-10<g/2&&(r="up",(s=m-g-5)<10&&(s=10))):(r="up",(s=m-g-5)<10&&(m-10<g/2?(r="down",(s=m+25)+g>p&&(s=p-g-10)):s=Math.max(10,s)));let w=x;w+800>f&&(w=Math.max(10,f-800-10));let v={top:s,left:w=Math.max(10,w),direction:r,maxHeight:"down"===r?Math.min(g,p-s-10):Math.min(g,m-10)};return document.body.removeChild(a),v},F=a.useCallback(e=>{let s=e.target.value,r=e.target.selectionStart;t(s);let a=s.slice(0,r),l=a.lastIndexOf("@");if(-1===l)return void N(!1);let n=a.slice(l+1);if(n.includes(" ")||n.length<3)return void N(!1);if(A(n),D(0),_.current){let e=V(_.current,r);if(null===e)return void N(!1);C(e),N(!0)}},[I]);(0,a.useEffect)(()=>{let e=()=>{j&&N(!1)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[j]);let P=s=>{if(!_.current||!s||!s.text)return;let r=_.current.selectionStart,a=e.slice(0,r),l=a.lastIndexOf("@");t(a.slice(0,l)+s.text+e.slice(r)),N(!1),setTimeout(()=>{if(_.current){let e=l+s.text.length;_.current.setSelectionRange(e,e),_.current.focus()}},0)},G=Array.from({length:e.split("\n").length},(e,t)=>t+1).join("\n"),J="generate"===s?(0,h.dY)(e):e,K="generate"===s;return(0,r.jsxs)("div",{className:"flex h-screen bg-white text-gray-900 overflow-hidden",children:[(0,r.jsx)(c.A,{currentPage:"/editor"}),w&&(0,r.jsx)("div",{className:"fixed top-4 right-4 z-50 flex items-center gap-2 px-4 py-3 rounded-lg shadow-lg ".concat("success"===w.type?"bg-green-500 text-white":"bg-red-500 text-white"),children:(0,r.jsx)("span",{className:"font-medium",children:w.message})}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,r.jsxs)("div",{className:"h-12 bg-gray-100 border-b border-gray-200 flex items-center px-4 mt-16",children:[(0,r.jsx)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:(0,r.jsx)("span",{className:"text-sm font-medium truncate",children:"Editor de Texto"})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>f(!0),className:"px-3 py-1.5 text-sm h-8",children:"Ver Substitui\xe7\xf5es"}),(0,r.jsxs)("div",{className:"flex bg-gray-200 rounded-lg p-1",children:[(0,r.jsxs)(o.$,{variant:"edit"===s?"default":"ghost",size:"sm",onClick:()=>m("edit"),className:"px-3 py-1.5 text-sm h-8",children:[(0,r.jsx)(l.A,{className:"w-4 h-4 mr-1.5"}),"Editar"]}),(0,r.jsxs)(o.$,{variant:"generate"===s?"default":"ghost",size:"sm",onClick:()=>m("generate"),className:"px-3 py-1.5 text-sm h-8",children:[(0,r.jsx)(n.A,{className:"w-4 h-4 mr-1.5"}),"Gerar"]})]}),(0,r.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>{let t=new Blob([e],{type:"text/plain"}),s=URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download="documento.txt",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s),q("Arquivo baixado!")},children:[(0,r.jsx)(i.A,{className:"w-4 h-4 mr-2"}),"Download"]})]})]}),(0,r.jsx)("main",{className:"flex-grow p-2 overflow-hidden",children:(0,r.jsxs)("div",{className:"relative h-full font-mono text-sm bg-white border border-gray-200 rounded",children:[(0,r.jsx)("pre",{ref:W,className:"absolute top-0 left-0 bottom-0 w-12 pr-2 pt-4 pb-5 text-right text-gray-400 pointer-events-none select-none overflow-hidden bg-gray-50 border-r border-gray-200",children:G}),(0,r.jsx)("textarea",{ref:_,value:J,onChange:K?void 0:F,onKeyDown:K?void 0:e=>{if(j)if("ArrowDown"===e.key){e.preventDefault();let t=Math.min(S+1,I.length-1);D(t);let s=document.querySelector(".autocomplete-dropdown"),r=null==s?void 0:s.children[t];if(r&&s){let e=s.getBoundingClientRect();r.getBoundingClientRect().bottom>e.bottom&&r.scrollIntoView({block:"end",behavior:"smooth"})}}else if("ArrowUp"===e.key){e.preventDefault();let t=Math.max(S-1,0);D(t);let s=document.querySelector(".autocomplete-dropdown"),r=null==s?void 0:s.children[t];if(r&&s){let e=s.getBoundingClientRect();r.getBoundingClientRect().top<e.top&&r.scrollIntoView({block:"start",behavior:"smooth"})}}else"Enter"===e.key?(e.preventDefault(),P(I[S])):("Escape"===e.key||" "===e.key)&&N(!1)},onScroll:e=>{W.current&&(W.current.scrollTop=e.currentTarget.scrollTop),j&&N(!1)},placeholder:"Digite seu texto aqui... Use @ para autocompletar",readOnly:K,className:"absolute top-0 left-12 right-0 bottom-0 p-4 resize-none border-none outline-none bg-white text-gray-900"}),j&&I.length>0&&!K&&(0,r.jsx)("div",{className:"autocomplete-dropdown fixed bg-white border border-gray-300 rounded-lg shadow-lg overflow-y-auto z-50",style:{top:k.top,left:k.left,width:"800px",maxHeight:"".concat(k.maxHeight,"px")},children:I.slice(0,50).map((e,t)=>(0,r.jsxs)("div",{onClick:()=>P(e),className:"p-3 cursor-pointer border-b border-gray-100 hover:bg-gray-50 transition-colors ".concat(t===S?"bg-blue-50 border-blue-200":""),children:[(0,r.jsxs)("div",{className:"font-medium text-sm",children:["@",e.key]}),(0,r.jsx)("div",{className:"text-xs text-gray-600 truncate",children:e.text})]},e.key))})]})})]}),(0,r.jsx)(d.lG,{open:p,onOpenChange:f,children:(0,r.jsxs)(d.Cf,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,r.jsx)(d.c7,{children:(0,r.jsx)(d.L3,{children:"Substitui\xe7\xf5es Dispon\xedveis"})}),(0,r.jsxs)("div",{className:"relative mb-4",children:[(0,r.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:"\uD83D\uDD0D"}),(0,r.jsx)("input",{type:"text",placeholder:"Digite pelo menos 3 caracteres para filtrar...",value:b,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),b&&(0,r.jsx)("button",{onClick:()=>y(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:"âœ•"})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:$.length>0?(0,r.jsxs)(r.Fragment,{children:[b.length>0&&b.length<3&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,r.jsx)("p",{className:"text-sm text-yellow-700",children:"Digite pelo menos 3 caracteres para uma busca mais r\xe1pida"})}),(0,r.jsx)("div",{className:"grid gap-3",children:$.map((e,t)=>(0,r.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-800",children:["@",e.key]}),e.key.toLowerCase().startsWith(L.toLowerCase())&&(0,r.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Exact Match"})]}),(0,r.jsx)("div",{className:"text-sm text-gray-700 whitespace-pre-wrap break-words",children:e.text.length>150?"".concat(e.text.substring(0,150),"..."):e.text})]},"".concat(e.key,"-").concat(t)))}),x.length>$.length&&(0,r.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,r.jsxs)("p",{className:"text-sm text-blue-700",children:["Mostrando"," ",$.length," ","de ",x.length," ","substitui\xe7\xf5es.",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"\uD83D\uDCA1 Dica:"})," Use termos mais espec\xedficos para resultados mais precisos e r\xe1pidos."]})})]}):(0,r.jsx)("div",{className:"flex items-center justify-center h-32 text-gray-500",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2 opacity-50",children:"\uD83D\uDD0D"}),(0,r.jsx)("p",{children:b.length>0&&b.length<3?"Digite pelo menos 3 caracteres":"Nenhuma substitui\xe7\xe3o encontrada"}),(0,r.jsx)("p",{className:"text-sm opacity-75",children:b.length>0&&b.length<3?"Filtros mais longos s\xe3o mais r\xe1pidos":"Tente ajustar o filtro ou verificar a grafia"})]})})})]})})]})}},8318:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]])},8341:(e,t,s)=>{Promise.resolve().then(s.bind(s,5968))},9298:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var r=s(5155),a=s(2115);let l=(0,s(2895).A)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);var n=s(7434),i=s(6740),o=s(5273),d=s(8318),c=s(4416),u=s(4783),h=s(285);let m=[{id:"home",title:"P\xe1gina Inicial",icon:l,path:"/"},{id:"editor",title:"Editor",icon:n.A,path:"/editor"},{id:"calcula_dose",title:"Contador de Doses",icon:i.A,path:"/calcula_dose"},{id:"exames_json",title:"Organizar Exames JSON",icon:o.A,path:"/exames_json"},{id:"notas",title:"Notas",icon:d.A,path:"/notas",disabled:!0}];function x(e){let{currentPage:t}=e,[s,l]=(0,a.useState)(!1),n=e=>{window.location.href=e,l(!1)},i=e=>{if(t)return t===e;{let t=window.location.pathname;return t===e||"/"===t&&"/"===e||t.includes(e)&&"/"!==e}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed top-4 left-4 z-50",children:(0,r.jsx)(h.$,{onClick:()=>{l(!s)},variant:"outline",size:"icon",className:"bg-white shadow-md hover:shadow-lg transition-shadow",children:s?(0,r.jsx)(c.A,{className:"w-5 h-5"}):(0,r.jsx)(u.A,{className:"w-5 h-5"})})}),s&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity",onClick:()=>l(!1)}),(0,r.jsxs)("div",{className:"fixed top-0 left-0 h-full w-80 bg-white shadow-xl z-50 transform transition-transform duration-300 ease-in-out ".concat(s?"translate-x-0":"-translate-x-full"),children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200 bg-blue-600 text-white",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"MedTools"}),(0,r.jsx)(h.$,{onClick:()=>l(!1),variant:"ghost",size:"icon",className:"text-white hover:bg-blue-700",children:(0,r.jsx)(c.A,{className:"w-5 h-5"})})]}),(0,r.jsx)("p",{className:"text-blue-100 text-sm mt-1",children:"Sistema de ferramentas m\xe9dicas"})]}),(0,r.jsx)("nav",{className:"p-4",children:(0,r.jsx)("div",{className:"space-y-2",children:m.map(e=>{let t=e.icon,s=i(e.path),a=e.disabled;return(0,r.jsxs)("button",{onClick:()=>!a&&!s&&n(e.path),disabled:a||s,className:"w-full flex items-center gap-3 p-3 rounded-lg text-left transition-colors ".concat(s?"bg-blue-100 text-blue-700 cursor-default":a?"text-gray-400 cursor-not-allowed opacity-60":"text-gray-700 hover:bg-gray-100 cursor-pointer"),children:[(0,r.jsx)(t,{className:"w-5 h-5 flex-shrink-0"}),(0,r.jsx)("span",{className:"font-medium",children:e.title}),s&&(0,r.jsx)("span",{className:"ml-auto text-xs bg-blue-200 text-blue-700 px-2 py-1 rounded-full",children:"Atual"}),a&&(0,r.jsx)("span",{className:"ml-auto text-xs bg-gray-200 text-gray-500 px-2 py-1 rounded-full",children:"Em Breve"})]},e.id)})})}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200 bg-gray-50",children:(0,r.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Desenvolvido para profissionais da sa\xfade"})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[975,114,599,441,684,358],()=>t(8341)),_N_E=e.O()}]);