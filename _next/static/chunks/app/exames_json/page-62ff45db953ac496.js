(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[531],{5330:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(72895).A)("TestTube2",[["path",{d:"M21 7 6.82 21.18a2.83 2.83 0 0 1-3.99-.01v0a2.83 2.83 0 0 1 0-4L17 3",key:"dg8b2p"}],["path",{d:"m16 2 6 6",key:"1gw87d"}],["path",{d:"M12 16H4",key:"1cjfip"}]])},6740:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(72895).A)("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]])},7121:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(72895).A)("Binary",[["rect",{x:"14",y:"14",width:"4",height:"6",rx:"2",key:"p02svl"}],["rect",{x:"6",y:"4",width:"4",height:"6",rx:"2",key:"xm4xkj"}],["path",{d:"M6 20h4",key:"1i6q5t"}],["path",{d:"M14 10h4",key:"ru81e7"}],["path",{d:"M6 14h2v6",key:"16z9wg"}],["path",{d:"M14 4h2v6",key:"1idq9u"}]])},15968:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(72895).A)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]])},18533:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(72895).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},22915:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(72895).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},25273:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(72895).A)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},32919:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(72895).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},37522:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(95155),r=a(12115),l=a(22915),i=a(18533),o=a(57434),n=a(30285),c=a(30008);function d(e){let{editorContent:t,onToast:l}=e,[i,c]=(0,r.useState)(!1),d=e=>{let t=e.split("\n").filter(e=>e.trim()),a=[];for(let e of t){let t=e.match(/^(\d{2}\/\d{2}):/);if(!t)continue;let s=t[1],r={};for(let t of e.matchAll(/([A-Za-z]+):\s*([0-9.]+(?:\*)?)/g)){let e=t[1],a=t[2];r[e]=a}Object.keys(r).length>0&&a.push({date:s,values:r})}return a},h=async e=>{var t,s,r;let{jsPDF:l}=await Promise.all([a.e(930),a.e(913)]).then(a.bind(a,26597)),i=new l,o=i.internal.pageSize.getWidth(),n=i.internal.pageSize.getHeight(),c=15;i.setFontSize(14),i.setFont("helvetica","bold"),i.text("FOLHA ESPELHO - AN\xc1LISE EVOLUTIVA",o/2,c,{align:"center"}),c+=16,i.setFontSize(10),i.setFont("helvetica","normal"),i.text("Per\xedodo: ".concat(null==(t=e[0])?void 0:t.date," a ").concat(null==(s=e[e.length-1])?void 0:s.date),15,c),c+=8,i.text("Total de avalia\xe7\xf5es: ".concat(e.length),15,c),c+=16;let d=new Set;e.forEach(e=>{Object.keys(e.values).forEach(e=>d.add(e))});let h=Array.from(d).sort(),x=e.map(e=>e.date),g=o-30,m=Math.min(35,.3*g),y=Math.min(20,(g-m)/x.length),u=8;u=x.length<=5?9:x.length<=8?8:7,i.setFontSize(u);let f=15;for(let e of(i.setFont("helvetica","bold"),i.rect(f,c-4,m,10),i.text("Exame",f+m/2,c+2,{align:"center"}),f+=m,x))i.rect(f,c-4,y,10),i.text(e,f+y/2,c+2,{align:"center"}),f+=y;for(let t of(c+=12,h)){if(c>n-40){for(let e of(i.addPage(),c=15,f=15,i.setFont("helvetica","bold"),i.rect(f,c-4,m,10),i.text("Exame",f+m/2,c+2,{align:"center"}),f+=m,x))i.rect(f,c-4,y,10),i.text(e,f+y/2,c+2,{align:"center"}),f+=y;c+=12}f=15,i.setFont("helvetica","normal"),i.rect(f,c-4,m,10);let a=t.length>8?t.substring(0,8)+"...":t;for(let s of(i.text(a,f+m/2,c+2,{align:"center"}),f+=m,x)){let a=(null==(r=e.find(e=>e.date===s))?void 0:r.values[t])||"";i.rect(f,c-4,y,10),i.text(a,f+y/2,c+2,{align:"center"}),f+=y}c+=10}return c>n-40&&(i.addPage(),c=15),i.setFontSize(10),i.setFont("helvetica","italic"),i.text("* Valores fora da faixa de refer\xeancia",15,c),c+=16,i.setFontSize(8),i.setFont("helvetica","normal"),i.text("Gerado em: ".concat(new Date().toLocaleString("pt-BR")),15,n-10),i},x=async()=>{if(!t.trim())return void l("Por favor, digite algum texto antes de gerar a folha espelho","error");c(!0);try{let e=d(t);if(0===e.length)return void l("Nenhum dado de exame v\xe1lido encontrado no texto","error");let a=await h(e),s="folha_espelho_".concat(new Date().toISOString().split("T")[0],".pdf");a.save(s),l("Folha espelho gerada com sucesso! ".concat(e.length," avalia\xe7\xf5es processadas."),"success")}catch(e){console.error("Erro ao gerar folha espelho:",e),l("Erro ao gerar a folha espelho. Verifique o formato dos dados.","error")}finally{c(!1)}};return(0,s.jsx)(n.$,{onClick:x,disabled:i,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-medium flex items-center gap-2",children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Gerando..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{className:"w-4 h-4"}),"Folha Espelho"]})})}let h={URE:"Ur",CRE:"Cr",SOD:"Na",WBC:"Leuco",HEMACI:"Hm",HGB:"Hb",NEUTP:"Neutrofilos",LINFOP:"Linfocitos",MONOP:"Monocitos",EOPS:"Eosinofilos",BASOP:"Basofilos",PLAQUE:"Plaq",BILT:"BT",BILD:"BD",BILI:"BI",MAG:"Mg",GLI:"Glicose"};function x(){let[e,t]=(0,r.useState)(""),[a,x]=(0,r.useState)(!1),[g,m]=(0,r.useState)(null),y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";m({message:e,type:t}),setTimeout(()=>m(null),3e3)};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(c.A,{currentPage:"/exames_json"}),g&&(0,s.jsxs)("div",{className:"fixed top-4 right-4 z-50 flex items-center gap-2 px-4 py-3 rounded-lg shadow-lg ".concat("success"===g.type?"bg-green-500 text-white":"bg-red-500 text-white"),children:["success"===g.type?(0,s.jsx)(l.A,{className:"w-5 h-5"}):(0,s.jsx)(i.A,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-medium",children:g.message})]}),(0,s.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between pl-14",children:[(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.A,{className:"w-6 h-6 text-blue-600"}),(0,s.jsx)("h1",{className:"text-xl font-semibold text-gray-800",children:"Organizador de Exames"})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Ordem reversa"}),(0,s.jsx)("button",{onClick:()=>x(!a),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(a?"bg-blue-600":"bg-gray-200"),children:(0,s.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(a?"translate-x-6":"translate-x-1")})})]}),(0,s.jsx)(d,{editorContent:e,onToast:y}),(0,s.jsx)(n.$,{onClick:()=>{if(!e.trim())return void y("Por favor, digite algum texto antes de organizar","error");try{let s=JSON.parse(e).d,r=[],l=[],i=new Map,o=new Map,n=new Map;if(s.ListaColunas.forEach(e=>{let t=e.Descricao.split(" ")[0];r.push(t)}),a||r.reverse(),s.ListaLinhas.forEach(e=>{let t=e.ListaParametros;for(let e=0;e<t.length;e++){let a=t[e],s=a.CodParametro;s&&(l.includes(s)||l.push(s),i.has(s)||i.set(s,[]),a.ListaValores.forEach(e=>{let t=e.Resultado;if(t){let a=e.ValorReferenciaInferior,r=e.ValorReferenciaSuperior,l=e.ForaFaixaReferencial;o.set(s,a),n.set(s,r),l&&(t+="*"),i.get(s).push(t)}else i.get(s).push("")}))}}),!a)for(let e of l){let t=i.get(e);t&&i.set(e,t.reverse())}let c=["Exames organizados para as datas: ".concat(r.join(", "),"\n")];for(let e=0;e<r.length;e++){let t=r[e],a="".concat(t,": ");for(let t of l){let s=h[t]||t,r=i.get(t)[e];r&&(a+="".concat(s,": ").concat(r," / "))}c.push(a.slice(0,-3)+"\n")}let d=c.join("");d+="\n\n* Resultados com asterisco (*) est\xe3o fora da faixa de refer\xeancia.",d+="\nLimites de Refer\xeancia:\n",l.forEach(e=>{let t=o.get(e),a=n.get(e);d+="".concat(e,": ").concat(t," - ").concat(a,"\n")}),t(d),y("Exames organizados com sucesso!","success")}catch(e){console.log("Erro ao organizar exames:",e),y("Formato inv\xe1lido. Verifique se o texto est\xe1 no formato correto ou \xe9 um JSON v\xe1lido.","error")}},className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium",children:"Organizar Exames"})]})]})}),(0,s.jsx)("div",{className:"flex-1 p-6",children:(0,s.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 h-[calc(100vh-140px)]",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-800",children:"Editor de Texto"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Digite ou cole seus dados de exames aqui em JSON. O sistema tentar\xe1 organiz\xe1-los."})]}),(0,s.jsx)("div",{className:"p-4 h-[calc(100%-80px)]",children:(0,s.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),placeholder:"Cole aqui...",className:"w-full h-full resize-none border-none outline-none text-gray-800 font-mono text-sm leading-relaxed"})})]})})})]})}},54416:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(72895).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},68318:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(72895).A)("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]])},74783:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(72895).A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},97207:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(72895).A)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]])},98068:(e,t,a)=>{Promise.resolve().then(a.bind(a,37522))}},e=>{var t=t=>e(e.s=t);e.O(0,[287,8,441,684,358],()=>t(98068)),_N_E=e.O()}]);