(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[531],{3998:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var a=r(95155),n=r(12115),l=r(32467),o=r(83101),s=r(64269);let i=(0,o.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:o,asChild:c=!1,...d}=e,u=c?l.DX:"button";return(0,a.jsx)(u,{className:(0,s.cn)(i({variant:n,size:o,className:r})),ref:t,...d})});c.displayName="Button"},24864:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(95155),n=r(12115),l=r(27816),o=r(91078),s=r(89715),i=r(3998);function c(e){let{editorContent:t,onToast:l}=e,[o,c]=(0,n.useState)(!1),d=async e=>{var t,a,n;let{jsPDF:l}=await Promise.all([r.e(3930),r.e(293),r.e(6241)]).then(r.bind(r,55172)),o=new l,s=o.internal.pageSize.getWidth(),i=o.internal.pageSize.getHeight(),c=15;o.setFontSize(14),o.setFont("helvetica","bold"),o.text("FOLHA ESPELHO - AN\xc1LISE EVOLUTIVA",s/2,c,{align:"center"}),c+=16,o.setFontSize(10),o.setFont("helvetica","normal"),o.text("Per\xedodo: ".concat(null==(t=e[0])?void 0:t.date," a ").concat(null==(a=e[e.length-1])?void 0:a.date),15,c),c+=8,o.text("Total de avalia\xe7\xf5es: ".concat(e.length),15,c),c+=16;let d=new Set;e.forEach(e=>{Object.keys(e.values).forEach(e=>d.add(e))});let u=Array.from(d).sort(),f=e.map(e=>e.date),h=s-30,g=Math.min(35,.3*h),m=Math.min(20,(h-g)/f.length),p=8;p=f.length<=5?9:f.length<=8?8:7,o.setFontSize(p);let x=15;for(let e of(o.setFont("helvetica","bold"),o.rect(x,c-4,g,10),o.text("Exame",x+g/2,c+2,{align:"center"}),x+=g,f))o.rect(x,c-4,m,10),o.text(e,x+m/2,c+2,{align:"center"}),x+=m;for(let t of(c+=12,u)){if(c>i-40){for(let e of(o.addPage(),c=15,x=15,o.setFont("helvetica","bold"),o.rect(x,c-4,g,10),o.text("Exame",x+g/2,c+2,{align:"center"}),x+=g,f))o.rect(x,c-4,m,10),o.text(e,x+m/2,c+2,{align:"center"}),x+=m;c+=12}x=15,o.setFont("helvetica","normal"),o.rect(x,c-4,g,10);let r=t.length>8?t.substring(0,8)+"...":t;for(let a of(o.text(r,x+g/2,c+2,{align:"center"}),x+=g,f)){let r=(null==(n=e.find(e=>e.date===a))?void 0:n.values[t])||"";o.rect(x,c-4,m,10),o.text(r,x+m/2,c+2,{align:"center"}),x+=m}c+=10}return c>i-40&&(o.addPage(),c=15),o.setFontSize(10),o.setFont("helvetica","italic"),o.text("* Valores fora da faixa de refer\xeancia",15,c),c+=16,o.setFontSize(8),o.setFont("helvetica","normal"),o.text("Gerado em: ".concat(new Date().toLocaleString("pt-BR")),15,i-10),o},u=async()=>{if(!t.trim())return void l("Por favor, digite algum texto antes de gerar a folha espelho","error");c(!0);try{let e=(e=>{let t=e.split("\n").filter(e=>e.trim()),r=[];for(let e of t){let t=e.match(/^(\d{2}\/\d{2}):/);if(!t)continue;let a=t[1],n={};for(let t of e.matchAll(/([A-Za-z]+):\s*([0-9.]+(?:\*)?)/g)){let e=t[1],r=t[2];n[e]=r}Object.keys(n).length>0&&r.push({date:a,values:n})}return r})(t);if(0===e.length)return void l("Nenhum dado de exame v\xe1lido encontrado no texto","error");let r=await d(e),a="folha_espelho_".concat(new Date().toISOString().split("T")[0],".pdf");r.save(a),l("Folha espelho gerada com sucesso! ".concat(e.length," avalia\xe7\xf5es processadas."),"success")}catch(e){console.error("Erro ao gerar folha espelho:",e),l("Erro ao gerar a folha espelho. Verifique o formato dos dados.","error")}finally{c(!1)}};return(0,a.jsx)(i.$,{onClick:u,disabled:o,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-medium flex items-center gap-2",children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Gerando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.A,{className:"w-4 h-4"}),"Folha Espelho"]})})}let d={URE:"Ur",CRE:"Cr",SOD:"Na",WBC:"Leuco",HEMACI:"Hm",HGB:"Hb",NEUTP:"Neutrofilos",LINFOP:"Linfocitos",MONOP:"Monocitos",EOPS:"Eosinofilos",BASOP:"Basofilos",PLAQUE:"Plaq",BILT:"BT",BILD:"BD",BILI:"BI",MAG:"Mg",GLI:"Glicose"};function u(){let[e,t]=(0,n.useState)(""),[r,u]=(0,n.useState)(!1),[f,h]=(0,n.useState)(null),g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";h({message:e,type:t}),setTimeout(()=>h(null),3e3)};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[f&&(0,a.jsxs)("div",{className:"fixed top-4 right-4 z-50 flex items-center gap-2 px-4 py-3 rounded-lg shadow-lg ".concat("success"===f.type?"bg-green-500 text-white":"bg-red-500 text-white"),children:["success"===f.type?(0,a.jsx)(l.A,{className:"w-5 h-5"}):(0,a.jsx)(o.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:f.message})]}),(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between pl-14",children:[(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(s.A,{className:"w-6 h-6 text-blue-600"}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-800",children:"Organizador de Exames"})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Ordem reversa"}),(0,a.jsx)("button",{onClick:()=>u(!r),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(r?"bg-blue-600":"bg-gray-200"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(r?"translate-x-6":"translate-x-1")})})]}),(0,a.jsx)(c,{editorContent:e,onToast:g}),(0,a.jsx)(i.$,{onClick:()=>{if(!e.trim())return void g("Por favor, digite algum texto antes de organizar","error");try{let a=JSON.parse(e).d,n=[],l=[],o=new Map,s=new Map,i=new Map;if(a.ListaColunas.forEach(e=>{let t=e.Descricao.split(" ")[0];n.push(t)}),r||n.reverse(),a.ListaLinhas.forEach(e=>{let t=e.ListaParametros;for(let e=0;e<t.length;e++){let r=t[e],a=r.CodParametro;a&&(l.includes(a)||l.push(a),o.has(a)||o.set(a,[]),r.ListaValores.forEach(e=>{let t=e.Resultado;if(t){let r=e.ValorReferenciaInferior,n=e.ValorReferenciaSuperior,l=e.ForaFaixaReferencial;s.set(a,r),i.set(a,n),l&&(t+="*"),o.get(a).push(t)}else o.get(a).push("")}))}}),!r)for(let e of l){let t=o.get(e);t&&o.set(e,t.reverse())}let c=["Exames organizados para as datas: ".concat(n.join(", "),"\n")];for(let e=0;e<n.length;e++){let t=n[e],r="".concat(t,": ");for(let t of l){let a=d[t]||t,n=o.get(t)[e];n&&(r+="".concat(a,": ").concat(n," / "))}c.push(r.slice(0,-3)+"\n")}let u=c.join("");u+="\n\n* Resultados com asterisco (*) est\xe3o fora da faixa de refer\xeancia.",u+="\nLimites de Refer\xeancia:\n",l.forEach(e=>{let t=s.get(e),r=i.get(e);u+="".concat(e,": ").concat(t," - ").concat(r,"\n")}),t(u),g("Exames organizados com sucesso!","success")}catch(e){console.log("Erro ao organizar exames:",e),g("Formato inv\xe1lido. Verifique se o texto est\xe1 no formato correto ou \xe9 um JSON v\xe1lido.","error")}},className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium",children:"Organizar Exames"})]})]})}),(0,a.jsx)("div",{className:"flex-1 p-6",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 h-[calc(100vh-140px)]",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-800",children:"Editor de Texto"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Digite ou cole seus dados de exames aqui em JSON. O sistema tentar\xe1 organiz\xe1-los."})]}),(0,a.jsx)("div",{className:"p-4 h-[calc(100%-80px)]",children:(0,a.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),placeholder:"Cole aqui...",className:"w-full h-full resize-none border-none outline-none text-gray-800 font-mono text-sm leading-relaxed"})})]})})})]})}},27816:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(45105).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},32467:(e,t,r)=>{"use strict";r.d(t,{DX:()=>s,TL:()=>o});var a=r(12115),n=r(94446),l=r(95155);function o(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:r,...l}=e;if(a.isValidElement(r)){var o;let e,s,i=(o=r,(s=(e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.ref:(s=(e=Object.getOwnPropertyDescriptor(o,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.props.ref:o.props.ref||o.ref),c=function(e,t){let r={...t};for(let a in t){let n=e[a],l=t[a];/^on[A-Z]/.test(a)?n&&l?r[a]=(...e)=>{let t=l(...e);return n(...e),t}:n&&(r[a]=n):"style"===a?r[a]={...n,...l}:"className"===a&&(r[a]=[n,l].filter(Boolean).join(" "))}return{...e,...r}}(l,r.props);return r.type!==a.Fragment&&(c.ref=t?(0,n.t)(t,i):i),a.cloneElement(r,c)}return a.Children.count(r)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=a.forwardRef((e,r)=>{let{children:n,...o}=e,s=a.Children.toArray(n),i=s.find(c);if(i){let e=i.props.children,n=s.map(t=>t!==i?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,l.jsx)(t,{...o,ref:r,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null})}return(0,l.jsx)(t,{...o,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}var s=o("Slot"),i=Symbol("radix.slottable");function c(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===i}},64269:(e,t,r)=>{"use strict";r.d(t,{J2:()=>s,Qr:()=>i,Tb:()=>c,cn:()=>l,dY:()=>o});var a=r(2821),n=r(75889);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,a.$)(t))}function o(e,t){let r=e.split("\n"),a=1,n=0;if(t){for(let e=0;e<r.length;e++){let t=r[e];(t.startsWith(".")||t.startsWith("-"))&&(n=Math.max(n,t.length))}for(let e=0;e<r.length;e++){let t=r[e];if(t.startsWith(".")||t.startsWith("-")){let l=a.toString()+(t.startsWith(".")?"":" ")+t,o="-".repeat(5+n-l.length);l+=" "+o,r[e]=l,a++}}}return r.join("\n")}function s(e){return e.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/Ã‡/g,"C").replace(/[^A-Z0-9 ()\[\]+]/g,"").replace(" ","")}function i(e,t){let r=s(e),a=s(t);if(r.includes(a)||a.includes(r))return .8;let n=[];for(let e=0;e<=r.length;e++)n[e]=[e];for(let e=0;e<=a.length;e++)n[0][e]=e;for(let e=1;e<=r.length;e++)for(let t=1;t<=a.length;t++)r[e-1]===a[t-1]?n[e][t]=n[e-1][t-1]:n[e][t]=Math.min(n[e-1][t-1]+1,n[e][t-1]+1,n[e-1][t]+1);let l=Math.max(r.length,a.length);return 1-n[r.length][a.length]/l}function c(){let e=new Date;return"".concat(e.getFullYear(),"_").concat(String(e.getMonth()+1).padStart(2,"0"),"_").concat(String(e.getDate()).padStart(2,"0"),"_").concat(String(e.getHours()).padStart(2,"0"),"_").concat(String(e.getMinutes()).padStart(2,"0"),"_").concat(String(e.getSeconds()).padStart(2,"0"))}},83101:(e,t,r)=>{"use strict";r.d(t,{F:()=>o});var a=r(2821);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=a.$,o=(e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return l(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:o,defaultVariants:s}=t,i=Object.keys(o).map(e=>{let t=null==r?void 0:r[e],a=null==s?void 0:s[e];if(null===t)return null;let l=n(t)||n(a);return o[e][l]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return l(e,i,null==t||null==(a=t.compoundVariants)?void 0:a.reduce((e,t)=>{let{class:r,className:a,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...s,...c}[t]):({...s,...c})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},89715:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(45105).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},91078:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(45105).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},94446:(e,t,r)=>{"use strict";r.d(t,{s:()=>o,t:()=>l});var a=r(12115);function n(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function l(...e){return t=>{let r=!1,a=e.map(e=>{let a=n(e,t);return r||"function"!=typeof a||(r=!0),a});if(r)return()=>{for(let t=0;t<a.length;t++){let r=a[t];"function"==typeof r?r():n(e[t],null)}}}}function o(...e){return a.useCallback(l(...e),e)}},98068:(e,t,r)=>{Promise.resolve().then(r.bind(r,24864))}},e=>{e.O(0,[9997,8441,1255,7358],()=>e(e.s=98068)),_N_E=e.O()}]);